<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:pf="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	template="/template/template.xhtml">
	<ui:define name="body">
	
		<h:form id="formOS" class="form-horizontal" role="form" prependId="false">
			<div class="card">
				<pf:dataTable var="os" value="#{oSController.listaOrdemServicos}">
					<f:facet name="header">
						<div class="row justify-content-between">
							<div class="col-md-8">
							 	<h3>Histórico das Ordens de Serviço</h3>
							</div>
							<div class="col-md-3">
								<pf:commandButton value="Nova OS" action="#{oSController.novaOS()}" styleClass="rounded-button ui-button-success"/>
							</div>
						</div>
			        </f:facet>
			        
					<pf:column headerText="N° OS">
						<h:outputText value="#{os.numeroOS}" />
					</pf:column>

					<pf:column headerText="Cliente">
						<h:outputText value="#{os.cliente.nome}" />
					</pf:column>

					<pf:column headerText="Data Início">
						<h:outputText value="#{os.dataInicio}" converter="dataConverter"  />
					</pf:column>
					
					<pf:column headerText="Valor Total">
						<h:outputText value="#{oSController.valorTotalOS(os)}" converter="moedaConverter" />
					</pf:column>
					
					<pf:column headerText="Acoes">
							 <!-- <pf:commandButton icon="pi pi-file" styleClass="rounded-button ui-button-default"
							 action="#{oSController.exibirOrdemServico(os)}"/> -->
							 <h:commandLink styleClass="btn btn-info" target="_blank" action="#{oSController.exibirOrdemServico(os)}">
									<i class="fa fa-download"></i> Download
							</h:commandLink>
					</pf:column>
					
					<f:facet name="footer">
			            <span class="font-bold">São no total #{fn:length(oSController.listaOrdemServicos)} ordens de serviço.</span>
			        </f:facet>
					
				</pf:dataTable>
			</div>
		</h:form>
			
	</ui:define>
</ui:composition>
	